{% comment %}
  Flexible Footer Section for Retail Savage Themes
  Supports 1-4 columns with customizable blocks per client
{% endcomment %}

<footer class="custom-footer color-{{ section.settings.color_scheme }}" 
        style="{% render 'spacing-style', settings: section.settings %}">
  <div class="custom-footer-container">
    <div class="custom-footer-content" 
         data-columns="{{ section.settings.columns }}"
         style="grid-template-columns: repeat({{ section.settings.columns }}, 1fr);">
      
      {% comment %} Create columns first, then populate with blocks {% endcomment %}
      {% for i in (1..section.settings.columns) %}
        <div class="custom-footer-column" data-column="{{ i }}">
          {% for block in section.blocks %}
            {% assign target_column = block.settings.column_assignment | default: 1 %}
            {% if target_column == i %}
              <div class="footer-block footer-block--{{ block.type }}" 
                   id="footer-block-{{ block.id }}"
                   {{ block.shopify_attributes }}
                   style="{% render 'spacing-style', settings: block.settings %}">
                
                {% case block.type %}
                  
                  {% when 'business_info' %}
                    {% render 'footer-business-info', block: block %}
                  
                  {% when 'store_hours' %}
                    {% render 'footer-store-hours', block: block %}
                  
                  {% when 'social_media' %}
                    {% render 'footer-social-media', block: block %}
                  
                  {% when 'google_map' %}
                    {% render 'footer-google-map', block: block %}
                  
                  {% when 'google_reviews' %}
                    {% render 'footer-google-reviews', block: block %}
                  
                  {% when 'custom_text' %}
                    {% render 'footer-custom-text', block: block %}
                  
                  {% when 'newsletter' %}
                    {% render 'footer-newsletter', block: block %}
                    
                {% endcase %}
              </div>
            {% endif %}
          {% endfor %}
        </div>
      {% endfor %}
    </div>
    
    {% if section.settings.show_copyright %}
      <div class="custom-footer-copyright">
        <p>{{ section.settings.copyright_text | default: shop.name | append: '. All rights reserved.' }}</p>
        {% if section.settings.show_powered_by %}
          <p class="powered-by">Powered by <a href="#" target="_blank">Retail Savage</a></p>
        {% endif %}
      </div>
    {% endif %}
  </div>
</footer>

{% style %}
  .custom-footer {
    background-color: {{ section.settings.background_color | default: '#f8f9fa' }};
    border-top: {{ section.settings.border_width }}px solid {{ section.settings.border_color | default: '#e9ecef' }};
    color: {{ section.settings.text_color | default: '#495057' }};
    margin-top: auto;
  }

  .custom-footer-container {
    max-width: {{ section.settings.container_width | default: 1200 }}px;
    margin: 0 auto;
    padding: {{ section.settings.padding_block_start | default: 60 }}px var(--spacing-md, 20px) {{ section.settings.padding_block_end | default: 32 }}px;
  }

  .custom-footer-content {
    display: grid;
    gap: {{ section.settings.column_gap | default: 60 }}px;
    margin-bottom: 40px;
  }

  .custom-footer-column {
    display: flex;
    flex-direction: column;
    gap: 30px;
  }


  .footer-block h3,
  .footer-block h4 {
    color: {{ section.settings.heading_color | default: '#6c757d' }};
    font-size: {{ section.settings.heading_size | default: 18 }}px;
    font-weight: {{ section.settings.heading_weight | default: 400 }};
    margin-bottom: 20px;
    letter-spacing: 1px;
    {% if section.settings.heading_uppercase %}
      text-transform: uppercase;
    {% endif %}
  }

  .custom-footer-copyright {
    border-top: 1px solid {{ section.settings.border_color | default: '#e9ecef' }};
    padding-top: 20px;
    text-align: center;
    color: {{ section.settings.copyright_color | default: '#6c757d' }};
    font-size: 14px;
  }

  .powered-by {
    margin-top: 10px;
    font-size: 12px;
    opacity: 0.8;
  }

  .powered-by a {
    color: inherit;
    text-decoration: none;
  }

  .powered-by a:hover {
    text-decoration: underline;
  }

  /* Responsive Design */
  @media (max-width: 968px) {
    .custom-footer-content {
      grid-template-columns: repeat({{ section.settings.columns_tablet | default: 2 }}, 1fr) !important;
      gap: 40px;
    }
  }

  @media (max-width: 640px) {
    .custom-footer-content {
      grid-template-columns: 1fr !important;
      gap: 40px;
    }
    
    .custom-footer {
      padding: 40px 0 20px;
    }
    
    .footer-block {
      text-align: center;
    }
  }
{% endstyle %}

{% schema %}
{
  "name": "Custom Footer",
  "tag": "footer",
  "class": "section-custom-footer",
  "settings": [
    {
      "type": "header",
      "content": "Layout Settings"
    },
    {
      "type": "range",
      "id": "columns",
      "min": 1,
      "max": 4,
      "step": 1,
      "label": "Desktop Columns",
      "default": 3
    },
    {
      "type": "range",
      "id": "columns_tablet",
      "min": 1,
      "max": 3,
      "step": 1,
      "label": "Tablet Columns",
      "default": 2
    },
    {
      "type": "range",
      "id": "column_gap",
      "min": 20,
      "max": 100,
      "step": 10,
      "unit": "px",
      "label": "Column Gap",
      "default": 60
    },
    {
      "type": "range",
      "id": "container_width",
      "min": 1000,
      "max": 1400,
      "step": 50,
      "unit": "px",
      "label": "Container Width",
      "default": 1200
    },
    {
      "type": "header",
      "content": "Colors & Styling"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Color Scheme",
      "default": "scheme-1"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background Color",
      "default": "#f8f9fa"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text Color",
      "default": "#495057"
    },
    {
      "type": "color",
      "id": "heading_color",
      "label": "Heading Color",
      "default": "#6c757d"
    },
    {
      "type": "range",
      "id": "heading_size",
      "min": 14,
      "max": 24,
      "step": 1,
      "unit": "px",
      "label": "Heading Size",
      "default": 18
    },
    {
      "type": "select",
      "id": "heading_weight",
      "label": "Heading Weight",
      "options": [
        {"value": "300", "label": "Light"},
        {"value": "400", "label": "Normal"},
        {"value": "500", "label": "Medium"},
        {"value": "600", "label": "Semi-Bold"},
        {"value": "700", "label": "Bold"}
      ],
      "default": "400"
    },
    {
      "type": "checkbox",
      "id": "heading_uppercase",
      "label": "Uppercase Headings",
      "default": true
    },
    {
      "type": "header",
      "content": "Border Settings"
    },
    {
      "type": "range",
      "id": "border_width",
      "min": 0,
      "max": 5,
      "step": 1,
      "unit": "px",
      "label": "Top Border Width",
      "default": 1
    },
    {
      "type": "color",
      "id": "border_color",
      "label": "Border Color",
      "default": "#e9ecef"
    },
    {
      "type": "header",
      "content": "Copyright Settings"
    },
    {
      "type": "checkbox",
      "id": "show_copyright",
      "label": "Show Copyright",
      "default": true
    },
    {
      "type": "text",
      "id": "copyright_text",
      "label": "Copyright Text",
      "placeholder": "© 2024 Your Store Name. All rights reserved."
    },
    {
      "type": "color",
      "id": "copyright_color",
      "label": "Copyright Text Color",
      "default": "#6c757d"
    },
    {
      "type": "checkbox",
      "id": "show_powered_by",
      "label": "Show 'Powered by Retail Savage'",
      "default": false
    },
    {
      "type": "header",
      "content": "Spacing"
    },
    {
      "type": "range",
      "id": "padding-block-start",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Top Padding",
      "default": 60
    },
    {
      "type": "range",
      "id": "padding-block-end",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Bottom Padding",
      "default": 32
    }
  ],
  "blocks": [
    {
      "type": "business_info",
      "name": "Business Info",
      "settings": [
        {
          "type": "header",
          "content": "Column Settings"
        },
        {
          "type": "range",
          "id": "column_assignment",
          "min": 1,
          "max": 4,
          "step": 1,
          "label": "Assign to Column",
          "default": 1,
          "info": "Which column should this block appear in?"
        },
        {
          "type": "text",
          "id": "heading",
          "label": "Heading",
          "default": "Contact Us"
        },
        {
          "type": "checkbox",
          "id": "show_logo",
          "label": "Show Logo/Brand",
          "default": false
        },
        {
          "type": "text",
          "id": "logo_text",
          "label": "Logo Text",
          "default": "DN"
        },
        {
          "type": "text",
          "id": "business_name",
          "label": "Business Name",
          "default": "DOTHAN NURSERIES"
        },
        {
          "type": "textarea",
          "id": "address",
          "label": "Address",
          "default": "1300 Montgomery Hwy\nDothan, AL 36303"
        },
        {
          "type": "text",
          "id": "phone",
          "label": "Phone Number",
          "default": "334.793.6244"
        },
        {
          "type": "text",
          "id": "phone_2",
          "label": "Second Phone Number",
          "default": "334.794.3480"
        },
        {
          "type": "text",
          "id": "email",
          "label": "Email Address",
          "default": "orders@dothannursery.com"
        },
        {
          "type": "url",
          "id": "website",
          "label": "Website URL"
        },
        {
          "type": "text",
          "id": "website_text",
          "label": "Website Link Text",
          "default": "Visit our main website"
        }
      ]
    },
    {
      "type": "store_hours",
      "name": "Store Hours",
      "settings": [
        {
          "type": "header",
          "content": "Column Settings"
        },
        {
          "type": "range",
          "id": "column_assignment",
          "min": 1,
          "max": 4,
          "step": 1,
          "label": "Assign to Column",
          "default": 2,
          "info": "Which column should this block appear in?"
        },
        {
          "type": "text",
          "id": "heading",
          "label": "Heading",
          "default": "Store Hours"
        },
        {
          "type": "text",
          "id": "monday",
          "label": "Monday",
          "default": "Closed"
        },
        {
          "type": "text",
          "id": "tuesday",
          "label": "Tuesday",
          "default": "9AM - 5PM"
        },
        {
          "type": "text",
          "id": "wednesday",
          "label": "Wednesday",
          "default": "9AM - 5PM"
        },
        {
          "type": "text",
          "id": "thursday",
          "label": "Thursday",
          "default": "9AM - 5PM"
        },
        {
          "type": "text",
          "id": "friday",
          "label": "Friday",
          "default": "9AM - 5PM"
        },
        {
          "type": "text",
          "id": "saturday",
          "label": "Saturday",
          "default": "9AM - 4PM"
        },
        {
          "type": "text",
          "id": "sunday",
          "label": "Sunday",
          "default": "Closed"
        },
        {
          "type": "paragraph",
          "content": "Hours are automatically grouped by consecutive days with the same schedule. Leave days blank or enter 'Closed' to mark as closed."
        }
      ]
    },
    {
      "type": "google_map",
      "name": "Google Map",
      "settings": [
        {
          "type": "header",
          "content": "Column Settings"
        },
        {
          "type": "range",
          "id": "column_assignment",
          "min": 1,
          "max": 4,
          "step": 1,
          "label": "Assign to Column",
          "default": 3,
          "info": "Which column should this block appear in?"
        },
        {
          "type": "text",
          "id": "heading",
          "label": "Heading",
          "default": "Find Us"
        },
        {
          "type": "text",
          "id": "address",
          "label": "Map Address",
          "info": "Full address for Google Maps",
          "placeholder": "1300 Montgomery Hwy, Dothan, AL 36303"
        },
        {
          "type": "url",
          "id": "directions_url",
          "label": "Google Maps Directions URL",
          "info": "Full Google Maps link for directions"
        },
        {
          "type": "range",
          "id": "map_height",
          "min": 200,
          "max": 500,
          "step": 50,
          "unit": "px",
          "label": "Map Height",
          "default": 300
        },
        {
          "type": "select",
          "id": "map_style",
          "label": "Map Style",
          "options": [
            {"value": "roadmap", "label": "Road Map"},
            {"value": "satellite", "label": "Satellite"},
            {"value": "hybrid", "label": "Hybrid"},
            {"value": "terrain", "label": "Terrain"}
          ],
          "default": "roadmap"
        },
        {
          "type": "range",
          "id": "zoom_level",
          "min": 10,
          "max": 18,
          "step": 1,
          "label": "Zoom Level",
          "default": 15
        },
        {
          "type": "checkbox",
          "id": "show_directions_link",
          "label": "Show 'Get Directions' Link",
          "default": true
        }
      ]
    },
    {
      "type": "google_reviews",
      "name": "Reviews",
      "settings": [
        {
          "type": "header",
          "content": "Column Settings"
        },
        {
          "type": "range",
          "id": "column_assignment",
          "min": 1,
          "max": 4,
          "step": 1,
          "label": "Assign to Column",
          "default": 3,
          "info": "Which column should this block appear in?"
        },
        {
          "type": "text",
          "id": "heading",
          "label": "Heading",
          "default": "Reviews"
        },
        {
          "type": "range",
          "id": "icon_size",
          "min": 16,
          "max": 32,
          "step": 2,
          "unit": "px",
          "label": "Icon Size",
          "default": 20
        },
        {
          "type": "select",
          "id": "layout_style",
          "label": "Layout Style",
          "options": [
            {"value": "stacked", "label": "Stacked (Name | Stars | Icon)"},
            {"value": "horizontal", "label": "Horizontal (Icon + Name/Stars)"}
          ],
          "default": "stacked"
        },
        {
          "type": "header",
          "content": "Google Reviews"
        },
        {
          "type": "url",
          "id": "google_reviews_url",
          "label": "Google Reviews URL",
          "info": "Direct link to your Google Reviews"
        },
        {
          "type": "text",
          "id": "google_rating",
          "label": "Google Rating",
          "info": "Enter rating like 4.9",
          "placeholder": "4.9"
        },
        {
          "type": "number",
          "id": "google_count",
          "label": "Google Review Count",
          "placeholder": "127"
        },
        {
          "type": "header",
          "content": "Yelp Reviews"
        },
        {
          "type": "url",
          "id": "yelp_url",
          "label": "Yelp Reviews URL"
        },
        {
          "type": "text",
          "id": "yelp_rating",
          "label": "Yelp Rating",
          "info": "Enter rating like 4.5",
          "placeholder": "4.5"
        },
        {
          "type": "number",
          "id": "yelp_count",
          "label": "Yelp Review Count",
          "placeholder": "89"
        },
        {
          "type": "header",
          "content": "Facebook Reviews"
        },
        {
          "type": "url",
          "id": "facebook_url",
          "label": "Facebook Reviews URL"
        },
        {
          "type": "text",
          "id": "facebook_rating",
          "label": "Facebook Rating",
          "info": "Enter rating like 4.8",
          "placeholder": "4.8"
        },
        {
          "type": "number",
          "id": "facebook_count",
          "label": "Facebook Review Count",
          "placeholder": "42"
        }
      ]
    },
    {
      "type": "social_media",
      "name": "Social Media",
      "settings": [
        {
          "type": "header",
          "content": "Column Settings"
        },
        {
          "type": "range",
          "id": "column_assignment",
          "min": 1,
          "max": 4,
          "step": 1,
          "label": "Assign to Column",
          "default": 2,
          "info": "Which column should this block appear in?"
        },
        {
          "type": "text",
          "id": "heading",
          "label": "Heading",
          "default": "Follow Us"
        },
        {
          "type": "url",
          "id": "facebook_url",
          "label": "Facebook URL"
        },
        {
          "type": "url",
          "id": "instagram_url",
          "label": "Instagram URL"
        },
        {
          "type": "url",
          "id": "twitter_url",
          "label": "Twitter/X URL"
        },
        {
          "type": "url",
          "id": "youtube_url",
          "label": "YouTube URL"
        },
        {
          "type": "url",
          "id": "tiktok_url",
          "label": "TikTok URL"
        },
        {
          "type": "url",
          "id": "linkedin_url",
          "label": "LinkedIn URL"
        },
        {
          "type": "select",
          "id": "icon_style",
          "label": "Icon Style",
          "options": [
            {"value": "circle", "label": "Circle"},
            {"value": "square", "label": "Square"},
            {"value": "rounded", "label": "Rounded Square"},
            {"value": "plain", "label": "Plain Icons"}
          ],
          "default": "plain"
        },
        {
          "type": "range",
          "id": "icon_size",
          "min": 20,
          "max": 40,
          "step": 2,
          "unit": "px",
          "label": "Icon Size",
          "default": 24
        }
      ]
    },
    {
      "type": "custom_text",
      "name": "Custom Text",
      "settings": [
        {
          "type": "header",
          "content": "Column Settings"
        },
        {
          "type": "range",
          "id": "column_assignment",
          "min": 1,
          "max": 4,
          "step": 1,
          "label": "Assign to Column",
          "default": 1,
          "info": "Which column should this block appear in?"
        },
        {
          "type": "text",
          "id": "heading",
          "label": "Heading"
        },
        {
          "type": "richtext",
          "id": "content",
          "label": "Content"
        },
        {
          "type": "select",
          "id": "text_alignment",
          "label": "Text Alignment",
          "options": [
            {"value": "left", "label": "Left"},
            {"value": "center", "label": "Center"},
            {"value": "right", "label": "Right"}
          ],
          "default": "left"
        }
      ]
    },
    {
      "type": "newsletter",
      "name": "Newsletter Signup",
      "settings": [
        {
          "type": "header",
          "content": "Column Settings"
        },
        {
          "type": "range",
          "id": "column_assignment",
          "min": 1,
          "max": 4,
          "step": 1,
          "label": "Assign to Column",
          "default": 4,
          "info": "Which column should this block appear in?"
        },
        {
          "type": "text",
          "id": "heading",
          "label": "Heading",
          "default": "Stay Updated"
        },
        {
          "type": "textarea",
          "id": "description",
          "label": "Description",
          "placeholder": "Sign up for our newsletter to get the latest updates and offers."
        },
        {
          "type": "text",
          "id": "button_text",
          "label": "Button Text",
          "default": "Subscribe"
        },
        {
          "type": "text",
          "id": "placeholder_text",
          "label": "Email Placeholder",
          "default": "Enter your email"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Custom Footer",
      "blocks": [
        {
          "type": "business_info",
          "settings": {
            "heading": "Contact Us"
          }
        },
        {
          "type": "store_hours",
          "settings": {
            "heading": "Store Hours"
          }
        },
        {
          "type": "social_media",
          "settings": {
            "heading": "Follow Us"
          }
        }
      ]
    },
    {
      "name": "Dothan Nurseries Footer",
      "settings": {
        "columns": 3,
        "background_color": "#f8f9fa",
        "text_color": "#495057",
        "heading_color": "#6c757d",
        "copyright_text": "© 2024 Dothan Nurseries. All rights reserved."
      },
      "blocks": [
        {
          "type": "business_info",
          "settings": {
            "heading": "VISIT US",
            "show_logo": true,
            "logo_text": "DN",
            "business_name": "DOTHAN NURSERIES",
            "address": "1300 Montgomery Hwy\nDothan, AL 36303",
            "phone": "334.793.6244",
            "phone_2": "334.794.3480",
            "email": "orders@dothannursery.com"
          }
        },
        {
          "type": "store_hours",
          "settings": {
            "heading": "HOURS",
            "monday": "Closed",
            "tuesday": "9AM - 5PM",
            "wednesday": "9AM - 5PM",
            "thursday": "9AM - 5PM",
            "friday": "9AM - 5PM",
            "saturday": "9AM - 4PM",
            "sunday": "Closed"
          }
        },
        {
          "type": "google_reviews",
          "settings": {
            "heading": "Reviews",
            "layout_style": "stacked",
            "google_reviews_url": "",
            "google_rating": "4.8",
            "google_count": 127,
            "yelp_url": "",
            "yelp_rating": "4.5",
            "yelp_count": 89,
            "icon_size": 20
          }
        }
      ]
    }
  ]
}
{% endschema %}