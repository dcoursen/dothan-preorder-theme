<div class="section-background color-{{ section.settings.color_scheme }}"></div>
<footer 
  class="footer section section--{{ section.settings.section_width }} color-{{ section.settings.color_scheme }}"
  style="{% render 'spacing-style', settings: section.settings %}"
>
  <div class="footer-container page-width">
    <div 
      class="footer-columns" 
      data-columns="{{ section.settings.columns }}"
      style="
        --footer-columns: {{ section.settings.columns }};
        --footer-gap: {{ section.settings.column_gap | default: 40 }}px;
      "
    >
      {% comment %} Create columns and populate with blocks based on column assignment {% endcomment %}
      {% for col in (1..section.settings.columns) %}
        <div class="footer-column footer-column--{{ col }}">
          {% for block in section.blocks %}
            {% assign block_column = block.settings.column | default: 1 %}
            {% if block_column == col %}
              <div class="footer-block footer-block--{{ block.type }}" {{ block.shopify_attributes }}>
                {% case block.type %}
                  {% when 'heading' %}
                    <h3 class="footer-block__heading">{{ block.settings.heading }}</h3>
                    
                  {% when 'text' %}
                    <div class="footer-block__text">
                      {{ block.settings.text }}
                    </div>
                    
                  {% when 'links' %}
                    {% if block.settings.heading != blank %}
                      <h3 class="footer-block__heading">{{ block.settings.heading }}</h3>
                    {% endif %}
                    {% if block.settings.menu != blank %}
                      <ul class="footer-block__links list-unstyled">
                        {% for link in block.settings.menu.links %}
                          <li><a href="{{ link.url }}">{{ link.title }}</a></li>
                        {% endfor %}
                      </ul>
                    {% endif %}
                    
                  {% when 'business_hours' %}
                    <div class="footer-block__hours">
                      {% if block.settings.heading != blank %}
                        <h3 class="footer-block__heading">{{ block.settings.heading }}</h3>
                      {% endif %}
                      <div class="hours-list">
                        {% if block.settings.combine_weekdays %}
                          {% if block.settings.weekdays_label != blank and block.settings.tuesday != blank %}
                            <div class="hours-item">
                              <span class="day">{{ block.settings.weekdays_label }}:</span>
                              <span class="time">{{ block.settings.tuesday }}</span>
                            </div>
                          {% endif %}
                          {% if block.settings.saturday != blank %}
                            <div class="hours-item">
                              <span class="day">Saturday:</span>
                              <span class="time">{{ block.settings.saturday }}</span>
                            </div>
                          {% endif %}
                          {% if block.settings.sunday != blank and block.settings.monday != blank %}
                            {% assign sunday_monday = block.settings.sunday | append: ' & Monday: ' | append: block.settings.monday %}
                            <div class="hours-item">
                              <span class="day">Sunday & Monday:</span>
                              <span class="time">{{ block.settings.sunday }}</span>
                            </div>
                          {% endif %}
                        {% else %}
                          {% assign days = 'Monday,Tuesday,Wednesday,Thursday,Friday,Saturday,Sunday' | split: ',' %}
                          {% assign day_settings = block.settings.monday | append: ',' | append: block.settings.tuesday | append: ',' | append: block.settings.wednesday | append: ',' | append: block.settings.thursday | append: ',' | append: block.settings.friday | append: ',' | append: block.settings.saturday | append: ',' | append: block.settings.sunday | split: ',' %}
                          {% for day in days %}
                            {% assign day_time = day_settings[forloop.index0] %}
                            {% if day_time != blank %}
                              <div class="hours-item">
                                <span class="day">{{ day }}:</span>
                                <span class="time">{{ day_time }}</span>
                              </div>
                            {% endif %}
                          {% endfor %}
                        {% endif %}
                      </div>
                    </div>
                    
                  {% when 'social' %}
                    <div class="footer-block__social">
                      {% if block.settings.heading != blank %}
                        <h3 class="footer-block__heading">{{ block.settings.heading }}</h3>
                      {% endif %}
                      <ul class="list-social list-unstyled" role="list">
                        {%- if settings.social_twitter_link != blank -%}
                          <li class="list-social__item">
                            <a href="{{ settings.social_twitter_link }}" class="link list-social__link">
                              {%- render 'icon-twitter' -%}
                              <span class="visually-hidden">{{ 'general.social.links.twitter' | t }}</span>
                            </a>
                          </li>
                        {%- endif -%}
                        {%- if settings.social_facebook_link != blank -%}
                          <li class="list-social__item">
                            <a href="{{ settings.social_facebook_link }}" class="link list-social__link">
                              {%- render 'icon-facebook' -%}
                              <span class="visually-hidden">{{ 'general.social.links.facebook' | t }}</span>
                            </a>
                          </li>
                        {%- endif -%}
                        {%- if settings.social_instagram_link != blank -%}
                          <li class="list-social__item">
                            <a href="{{ settings.social_instagram_link }}" class="link list-social__link">
                              {%- render 'icon-instagram' -%}
                              <span class="visually-hidden">{{ 'general.social.links.instagram' | t }}</span>
                            </a>
                          </li>
                        {%- endif -%}
                        {%- if settings.social_youtube_link != blank -%}
                          <li class="list-social__item">
                            <a href="{{ settings.social_youtube_link }}" class="link list-social__link">
                              {%- render 'icon-youtube' -%}
                              <span class="visually-hidden">{{ 'general.social.links.youtube' | t }}</span>
                            </a>
                          </li>
                        {%- endif -%}
                        {%- if settings.social_tiktok_link != blank -%}
                          <li class="list-social__item">
                            <a href="{{ settings.social_tiktok_link }}" class="link list-social__link">
                              {%- render 'icon-tiktok' -%}
                              <span class="visually-hidden">{{ 'general.social.links.tiktok' | t }}</span>
                            </a>
                          </li>
                        {%- endif -%}
                      </ul>
                    </div>
                    
                  {% when 'logo' %}
                    <div class="footer-block__logo">
                      {% if settings.logo %}
                        {%- assign logo_height = block.settings.logo_height | default: 50 -%}
                        <img 
                          src="{{ settings.logo | image_url: height: logo_height }}"
                          alt="{{ shop.name }}"
                          height="{{ logo_height }}"
                          width="{{ settings.logo.width | times: logo_height | divided_by: settings.logo.height }}"
                        >
                      {% else %}
                        <h2>{{ shop.name }}</h2>
                      {% endif %}
                    </div>
                    
                  {% when 'newsletter' %}
                    <div class="footer-block__newsletter">
                      {% if block.settings.heading != blank %}
                        <h3 class="footer-block__heading">{{ block.settings.heading }}</h3>
                      {% endif %}
                      {% form 'customer', id: 'FooterNewsletterForm' %}
                        <input type="hidden" name="contact[tags]" value="newsletter">
                        <div class="newsletter-form__field-wrapper">
                          <input
                            id="FooterNewsletterInput"
                            type="email"
                            name="contact[email]"
                            class="field__input"
                            value="{{ form.email }}"
                            aria-required="true"
                            autocorrect="off"
                            autocapitalize="off"
                            autocomplete="email"
                            placeholder="{{ 'newsletter.label' | t }}"
                            required
                          >
                          <button type="submit" class="button button--primary">
                            {{ 'newsletter.button_label' | t }}
                          </button>
                        </div>
                      {% endform %}
                    </div>
                    
                  {% when 'reviews' %}
                    <div class="footer-block__reviews">
                      {% if block.settings.heading != blank %}
                        <h3 class="footer-block__heading">{{ block.settings.heading }}</h3>
                      {% endif %}
                      <div class="reviews-list" data-layout="{{ block.settings.layout_style }}">
                        {% if block.settings.google_rating != blank %}
                          <div class="review-item review-item--google">
                            <a href="{{ block.settings.google_reviews_url }}" target="_blank" rel="noopener" class="review-link">
                              <div class="review-content">
                                <div class="review-platform">
                                  <span class="platform-name">Google</span>
                                  <div class="star-rating">
                                    {% assign rating = block.settings.google_rating | times: 1.0 %}
                                    {% assign full_stars = rating | floor %}
                                    {% assign has_half = rating | minus: full_stars | at_least: 0.5 %}
                                    {% for i in (1..5) %}
                                      {% if i <= full_stars %}
                                        <span class="star star--full">★</span>
                                      {% elsif i == full_stars | plus: 1 and has_half > 0 %}
                                        <span class="star star--half">★</span>
                                      {% else %}
                                        <span class="star star--empty">☆</span>
                                      {% endif %}
                                    {% endfor %}
                                  </div>
                                </div>
                                <div class="review-stats">
                                  <span class="rating-score">{{ block.settings.google_rating }}</span>
                                  {% if block.settings.google_count %}
                                    <span class="rating-count">({{ block.settings.google_count }} reviews)</span>
                                  {% endif %}
                                </div>
                              </div>
                            </a>
                          </div>
                        {% endif %}
                        {% if block.settings.yelp_rating != blank %}
                          <div class="review-item review-item--yelp">
                            <a href="{{ block.settings.yelp_url }}" target="_blank" rel="noopener" class="review-link">
                              <div class="review-content">
                                <div class="review-platform">
                                  <span class="platform-name">Yelp</span>
                                  <div class="star-rating">
                                    {% assign rating = block.settings.yelp_rating | times: 1.0 %}
                                    {% assign full_stars = rating | floor %}
                                    {% assign has_half = rating | minus: full_stars | at_least: 0.5 %}
                                    {% for i in (1..5) %}
                                      {% if i <= full_stars %}
                                        <span class="star star--full">★</span>
                                      {% elsif i == full_stars | plus: 1 and has_half > 0 %}
                                        <span class="star star--half">★</span>
                                      {% else %}
                                        <span class="star star--empty">☆</span>
                                      {% endif %}
                                    {% endfor %}
                                  </div>
                                </div>
                                <div class="review-stats">
                                  <span class="rating-score">{{ block.settings.yelp_rating }}</span>
                                  {% if block.settings.yelp_count %}
                                    <span class="rating-count">({{ block.settings.yelp_count }} reviews)</span>
                                  {% endif %}
                                </div>
                              </div>
                            </a>
                          </div>
                        {% endif %}
                        {% if block.settings.facebook_rating != blank %}
                          <div class="review-item review-item--facebook">
                            <a href="{{ block.settings.facebook_url }}" target="_blank" rel="noopener" class="review-link">
                              <div class="review-content">
                                <div class="review-platform">
                                  <span class="platform-name">Facebook</span>
                                  <div class="star-rating">
                                    {% assign rating = block.settings.facebook_rating | times: 1.0 %}
                                    {% assign full_stars = rating | floor %}
                                    {% assign has_half = rating | minus: full_stars | at_least: 0.5 %}
                                    {% for i in (1..5) %}
                                      {% if i <= full_stars %}
                                        <span class="star star--full">★</span>
                                      {% elsif i == full_stars | plus: 1 and has_half > 0 %}
                                        <span class="star star--half">★</span>
                                      {% else %}
                                        <span class="star star--empty">☆</span>
                                      {% endif %}
                                    {% endfor %}
                                  </div>
                                </div>
                                <div class="review-stats">
                                  <span class="rating-score">{{ block.settings.facebook_rating }}</span>
                                  {% if block.settings.facebook_count %}
                                    <span class="rating-count">({{ block.settings.facebook_count }} reviews)</span>
                                  {% endif %}
                                </div>
                              </div>
                            </a>
                          </div>
                        {% endif %}
                      </div>
                    </div>
                    
                  {% when 'custom_liquid' %}
                    {{ block.settings.custom_liquid }}
                    
                {% endcase %}
              </div>
            {% endif %}
          {% endfor %}
        </div>
      {% endfor %}
    </div>
    
    {% if section.settings.show_copyright %}
      <div class="footer-copyright">
        <small>
          &copy; {{ 'now' | date: '%Y' }}, {{ shop.name | link_to: routes.root_url }}
          {% if section.settings.show_policy_links %}
            {% for link in shop.policies %}
              {%- if link != blank -%}
                | <a href="{{ link.url }}">{{ link.title }}</a>
              {%- endif -%}
            {% endfor %}
          {% endif %}
        </small>
      </div>
    {% endif %}
  </div>
</footer>

{% stylesheet %}
  .footer {
    margin-top: auto;
    border-top: 1px solid rgba(var(--color-foreground), 0.08);
  }
  
  .footer-container {
    padding: 3rem 1rem;
  }
  
  .footer-columns {
    display: grid;
    grid-template-columns: repeat(var(--footer-columns, 4), 1fr);
    gap: var(--footer-gap, 40px);
    margin-bottom: 3rem;
  }
  
  .footer-column {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
  }
  
  .footer-block__heading {
    margin-bottom: 1rem;
    font-size: 1.1rem;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    opacity: 0.7;
  }
  
  .footer-block__links {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
  }
  
  .footer-block__links a {
    color: currentColor;
    text-decoration: none;
    opacity: 0.7;
    transition: opacity 0.2s;
  }
  
  .footer-block__links a:hover {
    opacity: 1;
  }
  
  .list-social {
    display: flex;
    gap: 1rem;
  }
  
  .list-social__link {
    display: block;
    width: 24px;
    height: 24px;
  }
  
  .footer-copyright {
    padding-top: 2rem;
    border-top: 1px solid rgba(var(--color-foreground), 0.08);
    text-align: center;
  }
  
  .footer-copyright small {
    opacity: 0.7;
  }
  
  @media screen and (max-width: 749px) {
    .footer-columns {
      grid-template-columns: 1fr;
      gap: 2rem;
    }
    
    .footer-column {
      gap: 1rem;
    }
  }
  
  .hours-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 0.5rem;
  }
  
  .hours-item .day {
    font-weight: 500;
    opacity: 0.8;
  }
  
  .hours-item .time {
    opacity: 0.7;
  }
  
  .reviews-list {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
  }
  
  .review-item {
    border: 1px solid rgba(var(--color-foreground), 0.08);
    border-radius: 8px;
    transition: all 0.3s ease;
    overflow: hidden;
  }
  
  .review-item:hover {
    border-color: rgba(var(--color-foreground), 0.15);
    box-shadow: 0 4px 12px rgba(var(--color-foreground), 0.1);
    transform: translateY(-1px);
  }
  
  .review-item--google:hover {
    border-color: #4285f4;
    box-shadow: 0 4px 12px rgba(66, 133, 244, 0.15);
  }
  
  .review-item--yelp:hover {
    border-color: #ff1744;
    box-shadow: 0 4px 12px rgba(255, 23, 68, 0.15);
  }
  
  .review-item--facebook:hover {
    border-color: #1877f2;
    box-shadow: 0 4px 12px rgba(24, 119, 242, 0.15);
  }
  
  .review-link {
    display: block;
    color: inherit;
    text-decoration: none;
    padding: 1rem;
    width: 100%;
  }
  
  .review-content {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
  }
  
  .review-platform {
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  
  .platform-name {
    font-weight: 600;
    font-size: 0.9rem;
    opacity: 0.9;
  }
  
  .star-rating {
    display: flex;
    gap: 1px;
  }
  
  .star {
    font-size: 14px;
    line-height: 1;
  }
  
  .star--full {
    color: #ffc107;
  }
  
  .star--half {
    color: #ffc107;
    opacity: 0.5;
  }
  
  .star--empty {
    color: rgba(var(--color-foreground), 0.2);
  }
  
  .review-stats {
    display: flex;
    align-items: baseline;
    gap: 0.5rem;
  }
  
  .rating-score {
    font-weight: 600;
    font-size: 1.1rem;
  }
  
  .rating-count {
    font-size: 0.85rem;
    opacity: 0.7;
  }
  
  @media screen and (max-width: 749px) {
    .review-content {
      gap: 0.75rem;
    }
    
    .review-platform {
      flex-direction: column;
      align-items: flex-start;
      gap: 0.25rem;
    }
  }
  
  @media screen and (min-width: 750px) and (max-width: 989px) {
    .footer-columns[data-columns="4"] {
      grid-template-columns: repeat(2, 1fr);
    }
  }
{% endstylesheet %}

{% schema %}
{
  "name": "Footer",
  "class": "section-wrapper",
  "tag": "footer",
  "settings": [
    {
      "type": "header",
      "content": "Layout"
    },
    {
      "type": "range",
      "id": "columns",
      "label": "Number of columns",
      "min": 1,
      "max": 4,
      "step": 1,
      "default": 4
    },
    {
      "type": "range",
      "id": "column_gap",
      "label": "Gap between columns",
      "min": 0,
      "max": 100,
      "step": 10,
      "unit": "px",
      "default": 40
    },
    {
      "type": "select",
      "id": "section_width",
      "label": "Section width",
      "options": [
        {
          "value": "page-width",
          "label": "Page width"
        },
        {
          "value": "full-width",
          "label": "Full width"
        }
      ],
      "default": "page-width"
    },
    {
      "type": "header",
      "content": "Appearance"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Color scheme",
      "default": "scheme-1"
    },
    {
      "type": "checkbox",
      "id": "show_copyright",
      "label": "Show copyright",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_policy_links",
      "label": "Show policy links",
      "default": true
    }
  ],
  "blocks": [
    {
      "type": "heading",
      "name": "Heading",
      "settings": [
        {
          "type": "text",
          "id": "heading",
          "label": "Heading",
          "default": "Heading"
        },
        {
          "type": "range",
          "id": "column",
          "label": "Column",
          "min": 1,
          "max": 4,
          "step": 1,
          "default": 1
        }
      ]
    },
    {
      "type": "text",
      "name": "Rich text",
      "settings": [
        {
          "type": "richtext",
          "id": "text",
          "label": "Text",
          "default": "<p>Share information about your brand with your customers.</p>"
        },
        {
          "type": "range",
          "id": "column",
          "label": "Column",
          "min": 1,
          "max": 4,
          "step": 1,
          "default": 1
        }
      ]
    },
    {
      "type": "links",
      "name": "Menu",
      "settings": [
        {
          "type": "text",
          "id": "heading",
          "label": "Heading"
        },
        {
          "type": "link_list",
          "id": "menu",
          "label": "Menu",
          "default": "footer"
        },
        {
          "type": "range",
          "id": "column",
          "label": "Column",
          "min": 1,
          "max": 4,
          "step": 1,
          "default": 1
        }
      ]
    },
    {
      "type": "business_hours",
      "name": "Business hours",
      "settings": [
        {
          "type": "text",
          "id": "heading",
          "label": "Heading",
          "default": "Store Hours"
        },
        {
          "type": "text",
          "id": "monday",
          "label": "Monday",
          "default": "Closed"
        },
        {
          "type": "text",
          "id": "tuesday",
          "label": "Tuesday",
          "default": "9AM - 5PM"
        },
        {
          "type": "text",
          "id": "wednesday",
          "label": "Wednesday",
          "default": "9AM - 5PM"
        },
        {
          "type": "text",
          "id": "thursday",
          "label": "Thursday",
          "default": "9AM - 5PM"
        },
        {
          "type": "text",
          "id": "friday",
          "label": "Friday",
          "default": "9AM - 5PM"
        },
        {
          "type": "text",
          "id": "saturday",
          "label": "Saturday",
          "default": "9AM - 4PM"
        },
        {
          "type": "text",
          "id": "sunday",
          "label": "Sunday",
          "default": "Closed"
        },
        {
          "type": "checkbox",
          "id": "combine_weekdays",
          "label": "Combine Weekdays (Tues-Fri)",
          "default": true
        },
        {
          "type": "text",
          "id": "weekdays_label",
          "label": "Weekdays Label",
          "default": "Tuesday - Friday"
        },
        {
          "type": "range",
          "id": "column",
          "label": "Column",
          "min": 1,
          "max": 4,
          "step": 1,
          "default": 2
        }
      ]
    },
    {
      "type": "social",
      "name": "Social media",
      "limit": 1,
      "settings": [
        {
          "type": "text",
          "id": "heading",
          "label": "Heading",
          "default": "Follow us"
        },
        {
          "type": "range",
          "id": "column",
          "label": "Column",
          "min": 1,
          "max": 4,
          "step": 1,
          "default": 1
        }
      ]
    },
    {
      "type": "logo",
      "name": "Logo",
      "limit": 1,
      "settings": [
        {
          "type": "range",
          "id": "logo_height",
          "label": "Logo height",
          "min": 30,
          "max": 150,
          "step": 10,
          "unit": "px",
          "default": 50
        },
        {
          "type": "range",
          "id": "column",
          "label": "Column",
          "min": 1,
          "max": 4,
          "step": 1,
          "default": 1
        }
      ]
    },
    {
      "type": "newsletter",
      "name": "Newsletter",
      "limit": 1,
      "settings": [
        {
          "type": "text",
          "id": "heading",
          "label": "Heading",
          "default": "Subscribe to our newsletter"
        },
        {
          "type": "range",
          "id": "column",
          "label": "Column",
          "min": 1,
          "max": 4,
          "step": 1,
          "default": 1
        }
      ]
    },
    {
      "type": "reviews",
      "name": "Reviews",
      "settings": [
        {
          "type": "text",
          "id": "heading",
          "label": "Heading",
          "default": "Reviews"
        },
        {
          "type": "select",
          "id": "layout_style",
          "label": "Layout Style",
          "options": [
            {"value": "stacked", "label": "Stacked (Name | Stars | Icon)"},
            {"value": "horizontal", "label": "Horizontal (Icon + Name/Stars)"}
          ],
          "default": "stacked"
        },
        {
          "type": "header",
          "content": "Google Reviews"
        },
        {
          "type": "url",
          "id": "google_reviews_url",
          "label": "Google Reviews URL",
          "info": "Direct link to your Google Reviews"
        },
        {
          "type": "text",
          "id": "google_rating",
          "label": "Google Rating",
          "info": "Enter rating like 4.9",
          "placeholder": "4.9"
        },
        {
          "type": "number",
          "id": "google_count",
          "label": "Google Review Count",
          "placeholder": "127"
        },
        {
          "type": "header",
          "content": "Yelp Reviews"
        },
        {
          "type": "url",
          "id": "yelp_url",
          "label": "Yelp Reviews URL"
        },
        {
          "type": "text",
          "id": "yelp_rating",
          "label": "Yelp Rating",
          "info": "Enter rating like 4.5",
          "placeholder": "4.5"
        },
        {
          "type": "number",
          "id": "yelp_count",
          "label": "Yelp Review Count",
          "placeholder": "89"
        },
        {
          "type": "header",
          "content": "Facebook Reviews"
        },
        {
          "type": "url",
          "id": "facebook_url",
          "label": "Facebook Reviews URL"
        },
        {
          "type": "text",
          "id": "facebook_rating",
          "label": "Facebook Rating",
          "info": "Enter rating like 4.8",
          "placeholder": "4.8"
        },
        {
          "type": "number",
          "id": "facebook_count",
          "label": "Facebook Review Count",
          "placeholder": "42"
        },
        {
          "type": "range",
          "id": "column",
          "label": "Column",
          "min": 1,
          "max": 4,
          "step": 1,
          "default": 4
        }
      ]
    },
    {
      "type": "custom_liquid",
      "name": "Custom Liquid",
      "settings": [
        {
          "type": "liquid",
          "id": "custom_liquid",
          "label": "Custom Liquid"
        },
        {
          "type": "range",
          "id": "column",
          "label": "Column",
          "min": 1,
          "max": 4,
          "step": 1,
          "default": 1
        }
      ]
    }
  ],
  "enabled_on": {
    "groups": ["footer"]
  }
}
{% endschema %}