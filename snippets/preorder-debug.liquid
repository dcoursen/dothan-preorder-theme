{%- comment -%}
  DEBUG: Simple preorder display logic
{%- endcomment -%}

{%- liquid
  assign target_product = product
  assign target_variant = product.selected_or_first_available_variant
  assign today = 'now' | date: '%s'
  assign drop_date_field = target_product.metafields.custom.preorder_drop_date
  
  assign show_preorder_info = false
  assign preorder_text = ''
  
  if drop_date_field != blank
    assign drop_date = drop_date_field | date: '%s'
    assign days_until_drop = drop_date | minus: today | divided_by: 86400
    
    if days_until_drop > 0
      assign show_preorder_info = true
      assign formatted_date = drop_date_field | date: '%B %d @ %l:%M%p EST'
      assign preorder_text = 'Available ' | append: formatted_date
    endif
  endif
-%}

{%- if show_preorder_info -%}
  <div style="background: #e8f5e8; border: 2px solid #4a7c4a; padding: 10px; margin: 10px 0; text-align: center; border-radius: 6px;">
    <strong>{{ preorder_text }}</strong>
  </div>
{%- endif -%}

{%- comment -%}DEBUG INFO{%- endcomment -%}
<div style="font-size: 10px; color: #666; margin: 5px 0;">
  DEBUG: Product={{ target_product.title }}, Drop Date={{ drop_date_field }}, Days={{ days_until_drop }}, Show={{ show_preorder_info }}
</div>
