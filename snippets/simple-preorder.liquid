{%- comment -%}
  Simple Preorder System - Single File Solution
  Just checks for preorder date and shows info box if future date exists
{%- endcomment -%}

{%- liquid
  assign preorder_date = product.metafields.custom.preorder_drop_date.value
  assign today = 'now' | date: '%s'
  assign show_preorder = false
  assign preorder_message = ''
  
  if preorder_date != blank
    assign drop_timestamp = preorder_date | date: '%s'
    if drop_timestamp > today
      assign show_preorder = true
      assign days_diff = drop_timestamp | minus: today | divided_by: 86400
      
      if days_diff <= 7
        assign day_name = preorder_date | date: '%A'
        assign time = preorder_date | date: '%l:%M%p EST'
        assign preorder_message = 'Available this ' | append: day_name | append: ' @ ' | append: time
      else
        assign preorder_message = 'Available ' | append: preorder_date | date: '%B %-d @ %l:%M%p EST'
      endif
    endif
  endif
-%}

{%- if show_preorder -%}
  <div class="preorder-info" style="
    background: #f0f7f0;
    border: 2px solid #4a7c4a;
    color: #2d5a2d;
    padding: 16px 20px;
    border-radius: 8px;
    margin: 16px 0;
    text-align: center;
    font-weight: 500;
  ">
    <span style="font-size: 1.2em; margin-right: 8px;">ðŸŒ±</span>
    <strong>Coming Soon:</strong> {{ preorder_message }}
  </div>
{%- endif -%}